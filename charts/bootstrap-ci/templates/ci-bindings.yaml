apiVersion: tekton.dev/v1alpha1
kind: TriggerBinding
metadata:
  annotations:
    kapp.k14s.io/change-rule: "upsert after upserting tekton.dev/triggers"
    kapp.k14s.io/change-group: "tekton.dev/ci-eventlistener"
  name: github-triggerbinding
  namespace: tekton-pipelines
spec:
  params:
    - name: event
      value: $(body)
    - name: eventType
      value: $(body.eventType)
    - name: eventAction
      value: $(body.eventAction)
    - name: repoName
      value: $(body.repository.name)
    - name: repoBranch
      value: $(body.repository.branch)
---
apiVersion: tekton.dev/v1alpha1
kind: TriggerBinding
metadata:
  annotations:
    kapp.k14s.io/change-rule: "upsert after upserting tekton.dev/triggers"
    kapp.k14s.io/change-group: "tekton.dev/ci-eventlistener"
  name: internal-triggerbinding
  namespace: tekton-pipelines
spec:
  params:
    - name: event
      value: $(body)
    - name: eventType
      value: $(body.global.ci.eventType)
    - name: namespace
      value: $(body.global.ci.namespace)
    - name: uid
      value: $(body.global.ci.uid)
    - name: repoURL
      value: $(body.global.ci.repository.url)
    - name: repoRevision
      value: $(body.global.ci.repository.revision)
    - name: repoName
      value: $(body.global.ci.repository.name)
    - name: repoBranch
      value: $(body.global.ci.repository.branch)
